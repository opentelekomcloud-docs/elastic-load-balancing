:original_name: CreateL7Rule.html

.. _CreateL7Rule:

Adding a Forwarding Rule
========================

Function
--------

This API is used to add a forwarding rule.

Constraints
-----------

If the action of **17policy** is set to **Redirect to another listener**, **17rule** cannot be created.

URI
---

POST /v3/{project_id}/elb/l7policies/{l7policy_id}/rules

.. table:: **Table 1** Path Parameters

   =========== ========= ====== ===================================
   Parameter   Mandatory Type   Description
   =========== ========= ====== ===================================
   l7policy_id Yes       String Specifies the forwarding policy ID.
   project_id  Yes       String Specifies the project ID.
   =========== ========= ====== ===================================

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +--------------+-----------+--------+--------------------------------------------------+
   | Parameter    | Mandatory | Type   | Description                                      |
   +==============+===========+========+==================================================+
   | X-Auth-Token | Yes       | String | Specifies the token used for IAM authentication. |
   +--------------+-----------+--------+--------------------------------------------------+

.. table:: **Table 3** Request body parameters

   +-----------+-----------+-------------------------------------------------------------------------+--------------------------------+
   | Parameter | Mandatory | Type                                                                    | Description                    |
   +===========+===========+=========================================================================+================================+
   | rule      | Yes       | :ref:`CreateRuleOption <createl7rule__request_createruleoption>` object | Specifies the forwarding rule. |
   +-----------+-----------+-------------------------------------------------------------------------+--------------------------------+

.. _createl7rule__request_createruleoption:

.. table:: **Table 4** CreateRuleOption

   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type                                                                                    | Description                                                                                                                                                                                                                                                                  |
   +=================+=================+=========================================================================================+==============================================================================================================================================================================================================================================================================+
   | admin_state_up  | No              | Boolean                                                                                 | Specifies the administrative status of the forwarding rule. The default value is **true**.                                                                                                                                                                                   |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | This parameter is unsupported. Please do not use it.                                                                                                                                                                                                                         |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | compare_type    | Yes             | String                                                                                  | Specifies how requests are matched with the forwarding rule. Values:                                                                                                                                                                                                         |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **EQUAL_TO**: exact match.                                                                                                                                                                                                                                                |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **REGEX**: regular expression match                                                                                                                                                                                                                                       |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **STARTS_WITH**: prefix match                                                                                                                                                                                                                                             |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | Note:                                                                                                                                                                                                                                                                        |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  If **type** is set to **HOST_NAME**, the value can only be **EQUAL_TO**, and asterisks (``*``) can be used as wildcard characters.                                                                                                                                        |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  If **type** is set to **PATH**, the value can be **REGEX**, **STARTS_WITH**, or **EQUAL_TO**.                                                                                                                                                                             |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  If **type** is set to **METHOD** or **SOURCE_IP**, the value can only be **EQUAL_TO**.                                                                                                                                                                                    |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  If **type** is set to **HEADER** or **QUERY_STRING**, the value can only be **EQUAL_TO**, asterisks (``*``) and question marks (?) can be used as wildcard characters.                                                                                                    |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | key             | No              | String                                                                                  | Specifies the key of match content. For example, if the request header is used for forwarding, **key** is the request header.                                                                                                                                                |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | This parameter is unsupported. Please do not use it.                                                                                                                                                                                                                         |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | Minimum: **0**                                                                                                                                                                                                                                                               |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | Maximum: **255**                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | value           | Yes             | String                                                                                  | Specifies the value of the match content. For example, if a domain name is used for matching, **value** is the domain name. This parameter is valid only when **conditions** is left blank.                                                                                  |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  If **type** is set to **HOST_NAME**, the value can contain letters, digits, hyphens (-), periods (.), and asterisks (*) and must start with a letter or digit. If you want to use a wildcard domain name, enter an asterisk (*) as the leftmost label of the domain name. |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  If **type** is set to **PATH** and **compare_type** to **STARTS_WITH** or **EQUAL_TO**, the value can contain only letters, digits, and special characters ``_~';@^-%#&$.*+?,=!:|/()[]{}``                                                                                |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  If **type** is set to **METHOD**, **SOURCE_IP**, **HEADER**, or **QUERY_STRING**, this parameter will not take effect, and **conditions** will be used to specify the key and value.                                                                                      |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | Minimum: **1**                                                                                                                                                                                                                                                               |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | Maximum: **128**                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id      | No              | String                                                                                  | Specifies the project ID.                                                                                                                                                                                                                                                    |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | Minimum: **32**                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | Maximum: **32**                                                                                                                                                                                                                                                              |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type            | Yes             | String                                                                                  | Specifies the match content. The value can be one of the following:                                                                                                                                                                                                          |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **HOST_NAME**: A domain name will be used for matching.                                                                                                                                                                                                                   |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **PATH**: A URL will be used for matching.                                                                                                                                                                                                                                |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **METHOD**: An HTTP request method will be used for matching.                                                                                                                                                                                                             |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **HEADER**: The request header will be used for matching.                                                                                                                                                                                                                 |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **QUERY_STRING**: A query string will be used for matching.                                                                                                                                                                                                               |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | -  **SOURCE_IP**: The source IP address will be used for matching. Note: If **type** is set to **HOST_NAME**, **PATH**, **METHOD**, or **SOURCE_IP**, only one forwarding rule can be created for each type.                                                                 |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | invert          | No              | Boolean                                                                                 | Specifies whether reverse matching is supported. The value can be **true** or **false** (default).                                                                                                                                                                           |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | This parameter is unsupported. Please do not use it.                                                                                                                                                                                                                         |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | conditions      | No              | Array of :ref:`CreateRuleCondition <createl7rule__request_createrulecondition>` objects | Specifies the matching conditions of the forwarding rule. This parameter is available only when **enhance_l7policy_enable** is set to **true**.                                                                                                                              |
   |                 |                 |                                                                                         |                                                                                                                                                                                                                                                                              |
   |                 |                 |                                                                                         | If **conditions** is specified, parameters **key** and **value** will not take effect, and the **conditions** value will contain all conditions configured for the forwarding rule. The keys in the list must be the same, whereas each value must be unique.                |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _createl7rule__request_createrulecondition:

.. table:: **Table 5** CreateRuleCondition

   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   +=================+=================+=================+============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | key             | No              | String          | Specifies the key of match item.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **HOST_NAME**, **PATH**, **METHOD**, or **SOURCE_IP**, this parameter is left blank.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **HEADER**, **key** indicates the name of the HTTP header parameter. The value can contain 1 to 40 characters, including letters, digits, hyphens (-), and underscores (_).                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **QUERY_STRING**, **key** indicates the name of the query parameter. The value is case sensitive and can contain 1 to 128 characters. Spaces, square brackets ([ ]), curly brackets ({ }), angle brackets (< >), backslashes (), double quotation marks (" "), pound signs (#), ampersands (&), vertical bars (|), percent signs (%), and tildes (~) are not supported.                                                                                                                                                                                                           |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | All keys in the conditions list in the same rule must be the same.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | Minimum: **1**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | Maximum: **128**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | value           | Yes             | String          | Specifies the value of the match item.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **HOST_NAME**, **key** is left blank, and **value** indicates the domain name, which can contain 1 to 128 characters, including letters, digits, hyphens (-), periods (.), and asterisks (*), and must start with a letter, digit, or asterisk (*). If you want to use a wildcard domain name, enter an asterisk (``*``) as the leftmost label of the domain name.                                                                                                                                                                                                                |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **PATH**, **key** is left blank, and **value** indicates the request path, which can contain 1 to 128 characters. If **compare_type** is set to **STARTS_WITH** or **EQUAL_TO** for the forwarding rule, the value must start with a slash (/) and can contain only letters, digits, and special characters ``_~';@^-%#&$.*+?,=!:|/()[]{}``                                                                                                                                                                                                                                       |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **HEADER**, **key** indicates the name of the HTTP header parameter, and **value** indicates the value of the HTTP header parameter. The value can contain 1 to 128 characters. Asterisks (``*``) and question marks (?) are allowed, but spaces and double quotation marks are not allowed. An asterisk can match zero or more characters, and a question mark can match 1 character.                                                                                                                                                                                            |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **QUERY_STRING**, **key** indicates the name of the query parameter, and **value** indicates the value of the query parameter. The value is case sensitive and can contain 1 to 128 characters. Spaces, square brackets ([ ]), curly brackets ({ }), angle brackets (< >), backslashes (), double quotation marks (" "), pound signs (#), ampersands (&), vertical bars (|), percent signs (%), and tildes (~) are not supported. Asterisks (``*``) and question marks (?) are allowed. An asterisk can match zero or more characters, and a question mark can match 1 character. |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **METHOD**, **key** is left blank, and **value** indicates the HTTP method. The value can be **GET**, **PUT**, **POST**, **DELETE**, **PATCH**, **HEAD**, or **OPTIONS**.                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | -  If **type** is set to **SOURCE_IP**, **key** is left blank, and **value** indicates the source IP address of the request. The value is an IPv4 or IPv6 CIDR block, for example, 192.168.0.2/32 or 2049::49/64.                                                                                                                                                                                                                                                                                                                                                                                          |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | All keys in the conditions list in the same rule must be the same.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | Minimum: **1**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                 |                 |                 | Maximum: **128**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 201**

.. table:: **Table 6** Response body parameters

   +------------+------------------------------------------------------+-----------------------------------------------------------------+
   | Parameter  | Type                                                 | Description                                                     |
   +============+======================================================+=================================================================+
   | request_id | String                                               | Specifies the request ID. The value is automatically generated. |
   +------------+------------------------------------------------------+-----------------------------------------------------------------+
   | rule       | :ref:`L7Rule <createl7rule__response_l7rule>` object | Specifies the forwarding rule.                                  |
   +------------+------------------------------------------------------+-----------------------------------------------------------------+

.. _createl7rule__response_l7rule:

.. table:: **Table 7** L7Rule

   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                         | Description                                                                                                                                                                                                                                                                                                                                                                                           |
   +=======================+==============================================================================+=======================================================================================================================================================================================================================================================================================================================================================================================================+
   | admin_state_up        | Boolean                                                                      | Specifies the administrative status of the forwarding rule. The default value is **true**.                                                                                                                                                                                                                                                                                                            |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | This parameter is unsupported. Please do not use it.                                                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | compare_type          | String                                                                       | Specifies how requests are matched with the domain name or URL.                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  If **type** is set to **HOST_NAME**, this parameter can only be set to **EQUAL_TO**.                                                                                                                                                                                                                                                                                                               |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  If **type** is set to **PATH**, the value can be **REGEX**, **STARTS_WITH**, or **EQUAL_TO**.                                                                                                                                                                                                                                                                                                      |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | key                   | String                                                                       | Specifies the key of the match content. This parameter will not take effect if **type** is set to **HOST_NAME** or **PATH**.                                                                                                                                                                                                                                                                          |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | Minimum: **1**                                                                                                                                                                                                                                                                                                                                                                                        |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | Maximum: **255**                                                                                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id            | String                                                                       | Specifies the project ID.                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type                  | String                                                                       | Specifies the type of the forwarding rule. The value can be one of the following:                                                                                                                                                                                                                                                                                                                     |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  **HOST_NAME**: A domain name will be used for matching.                                                                                                                                                                                                                                                                                                                                            |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  **PATH**: A URL will be used for matching.                                                                                                                                                                                                                                                                                                                                                         |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  **METHOD**: An HTTP request method will be used for matching.                                                                                                                                                                                                                                                                                                                                      |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  **HEADER**: The request header will be used for matching.                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  **QUERY_STRING**: A query string will be used for matching.                                                                                                                                                                                                                                                                                                                                        |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  **SOURCE_IP**: The source IP address will be used for matching.                                                                                                                                                                                                                                                                                                                                    |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | Note:                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | If **type** is set to **HOST_NAME**, **PATH**, **METHOD**, and **SOURCE_IP**, only one forwarding rule can be created for each type. If **type** is set to **HEADER** and **QUERY_STRING**, multiple forwarding rules can be created for each type.                                                                                                                                                   |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | value                 | String                                                                       | Specifies the value of the match item. For example, if a domain name is used for matching, **value** is the domain name. This parameter will take effect only when **conditions** is left blank.                                                                                                                                                                                                      |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  If **type** is set to **HOST_NAME**, the value can contain letters, digits, hyphens (-), and periods (.) and must start with a letter or digit. If you want to use a wildcard domain name, enter an asterisk (``*``) as the leftmost label of the domain name.                                                                                                                                     |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  If **type** is set to **PATH** and **compare_type** to **STARTS_WITH** or **EQUAL_TO**, the value must start with a slash (/) and can contain only letters, digits, and special characters ``_~';@^-%#&$.*+?,=!:|/()[]{}``                                                                                                                                                                         |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | -  If **type** is set to **METHOD**, **SOURCE_IP**, **HEADER**, or **QUERY_STRING**, this parameter will not take effect, and **condition_pair** will be used to specify the key and value.                                                                                                                                                                                                           |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | Minimum: **1**                                                                                                                                                                                                                                                                                                                                                                                        |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | Maximum: **128**                                                                                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | provisioning_status   | String                                                                       | Specifies the provisioning status of the forwarding rule.                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | The value can only be **ACTIVE** (default), **PENDING_CREATE**, or **ERROR**.                                                                                                                                                                                                                                                                                                                         |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | This parameter is unsupported. Please do not use it.                                                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | invert                | Boolean                                                                      | Specifies whether reverse matching is supported. The value is fixed at **false**. This parameter can be updated but will not take effect.                                                                                                                                                                                                                                                             |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                    | String                                                                       | Specifies the forwarding policy ID.                                                                                                                                                                                                                                                                                                                                                                   |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | conditions            | Array of :ref:`RuleCondition <createl7rule__response_rulecondition>` objects | Specifies the matching conditions of the forwarding rule. This parameter will take effect when **enhance_l7policy_enable** is set to **.true**. If **conditions** is specified, **key** and **value** will not take effect, and the value of this parameter will contain all conditions configured for the forwarding rule. The keys in the list must be the same, whereas each value must be unique. |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at            | String                                                                       | Specifies the time when the forwarding rule was added. The format is yyyy-MM-dd'T'HH:mm:ss'Z' (UTC time).                                                                                                                                                                                                                                                                                             |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | This is a new field in this version, and it will not be returned for resources associated with existing dedicated load balancers and for resources associated with existing and new shared load balancers.                                                                                                                                                                                            |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at            | String                                                                       | Specifies the time when the forwarding rule was updated. The format is yyyy-MM-dd'T'HH:mm:ss'Z' (UTC time).                                                                                                                                                                                                                                                                                           |
   |                       |                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                                                              | This is a new field in this version, and it will not be returned for resources associated with existing dedicated load balancers and for resources associated with existing and new shared load balancers.                                                                                                                                                                                            |
   +-----------------------+------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _createl7rule__response_rulecondition:

.. table:: **Table 8** RuleCondition

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   +=======================+=======================+============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | key                   | String                | Specifies the key of match item.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **HOST_NAME**, **PATH**, **METHOD**, or **SOURCE_IP**, this parameter is left blank.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **HEADER**, **key** indicates the name of the HTTP header parameter. The value can contain 1 to 40 characters, including letters, digits, hyphens (-), and underscores (_).                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **QUERY_STRING**, **key** indicates the name of the query parameter. The value is case sensitive and can contain 1 to 128 characters. Spaces, square brackets ([ ]), curly brackets ({ }), angle brackets (< >), backslashes (), double quotation marks (" "), pound signs (#), ampersands (&), vertical bars (|), percent signs (%), and tildes (~) are not supported.                                                                                                                                                                                                           |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | All keys in the conditions list in the same rule must be the same.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | Minimum: **1**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | Maximum: **128**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | value                 | String                | Specifies the value of the match item.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **HOST_NAME**, **key** is left blank, and **value** indicates the domain name, which can contain 1 to 128 characters, including letters, digits, hyphens (-), periods (.), and asterisks (*), and must start with a letter, digit, or asterisk (*). If you want to use a wildcard domain name, enter an asterisk (``*``) as the leftmost label of the domain name.                                                                                                                                                                                                                |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **PATH**, **key** is left blank, and **value** indicates the request path, which can contain 1 to 128 characters. If **compare_type** is set to **STARTS_WITH** or **EQUAL_TO** for the forwarding rule, the value must start with a slash (/) and can contain only letters, digits, and special characters ``_~';@^-%#&$.*+?,=!:|/()[]{}``                                                                                                                                                                                                                                       |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **HEADER**, **key** indicates the name of the HTTP header parameter, and **value** indicates the value of the HTTP header parameter. The value can contain 1 to 128 characters. Asterisks (``*``) and question marks (?) are allowed, but spaces and double quotation marks are not allowed. An asterisk can match zero or more characters, and a question mark can match 1 character.                                                                                                                                                                                            |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **QUERY_STRING**, **key** indicates the name of the query parameter, and **value** indicates the value of the query parameter. The value is case sensitive and can contain 1 to 128 characters. Spaces, square brackets ([ ]), curly brackets ({ }), angle brackets (< >), backslashes (), double quotation marks (" "), pound signs (#), ampersands (&), vertical bars (|), percent signs (%), and tildes (~) are not supported. Asterisks (``*``) and question marks (?) are allowed. An asterisk can match zero or more characters, and a question mark can match 1 character. |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **METHOD**, **key** is left blank, and **value** indicates the HTTP method. The value can be **GET**, **PUT**, **POST**, **DELETE**, **PATCH**, **HEAD**, or **OPTIONS**.                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | -  If **type** is set to **SOURCE_IP**, **key** is left blank, and **value** indicates the source IP address of the request. The value is an IPv4 or IPv6 CIDR block, for example, 192.168.0.2/32 or 2049::49/64.                                                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | All keys in the conditions list in the same rule must be the same.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | Minimum: **1**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                       | Maximum: **128**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

.. code-block:: text

   POST https://{ELB_Endpoint}/v3/{99a3fff0d03c428eac3678da6a7d0f24}/elb/l7policies/cf4360fd-8631-41ff-a6f5-b72c35da74be/rules

   {
     "rule" : {
       "compare_type" : "EQUAL_TO",
       "type" : "PATH",
       "value" : "/bbb.html"
     }
   }

Example Responses
-----------------

**Status code: 201**

Normal response to POST requests.

.. code-block::

   {
     "rule" : {
       "compare_type" : "EQUAL_TO",
       "provisioning_status" : "ACTIVE",
       "project_id" : "99a3fff0d03c428eac3678da6a7d0f24",
       "invert" : false,
       "admin_state_up" : true,
       "value" : "/bbb.html",
       "key" : null,
       "type" : "PATH",
       "id" : "84f4fcae-9c15-4e19-a99f-72c0b08fd3d7"
     },
     "request_id" : "3639f1b7-f04b-496e-9218-ec5a9e493f69"
   }

Status Codes
------------

=========== =================================
Status Code Description
=========== =================================
201         Normal response to POST requests.
=========== =================================

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
